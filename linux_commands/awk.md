### awk最简单的命令行使用方法
```shell
awk [-F  field-separator]  'commands'  input-file(s)
```
### awk内置变量  
```shell
ARGC               命令行参数个数
ARGV               命令行参数排列
ENVIRON            支持队列中系统环境变量的使用
FILENAME           awk浏览的文件名
FNR                浏览文件的记录数
FS                 设置输入域分隔符，等价于命令行 -F选项
NF                 浏览记录的域的个数
NR                 已读的记录数
OFS                输出域分隔符
ORS                输出记录分隔符
RS                 控制记录分隔符
```
此外,$0变量是指整条记录。$1表示当前行的第一个域,$2表示当前行的第二个域,......以此类推。

### 实例
```shell
cat 123.txt | awk -F"\t" '{print $7}' | awk -F"," '{for(i=1;i<=NF;i++)print $i}' | awk -F"|" '{print $1}' | sort | uniq -c | awk '{if($1>1)print $0}'   
```
### 1.cat 123.txt  
回显输出123.txt内容   
```shell
chengxq@aliyun trunk$ cat 123.txt 
2018-03-01 17:18:28912222.130.221.159127.0.0.122321300871158709993_0|4199716759982061|3200,1195354434_0|4202270163995091|3200,3669102477_0|4200564508733208|3200,1228486722_0|4209934205869347|3200,2713968254_0|4199432126350256|3200,1234867763_0|4205135599723212|3200,1172294045_0|4209618152899172|3200,1809054937_0|4208433375325319|3200,1705586121_0|4211085161138276|3200,2687827715_0|4202299260145817|3200,1934403631_0|4194268162277017|3200,1270623893_0|4200418085381746|3200,1847672711_0|4198638404567850|3200,1756505647_0|4202726906577682|3200,2945931603_0|4210824124463127|3200,1651077203_0|4202687375152747|3200,3700233717_0|4188245237303670|3200,2041418617_0|4203294572525856|3200,1289012440_0|4202659894132861|3200,1644461042_0|4205282890804630|3200,2646681810_0|4194316420941427|3200,1843875727_0|4185328576918344|3200,1233614454_0|4210882156316052|3200,1784537661_0|4194336118123841|3200,1838921261_0|4202693352444836|3200,1792951112_0|4191174053088358|3200,2036799634_0|4196812212910398|3200,1639421885_0|4191085699984267|3200,1231654104_0|4203367419251110|3200,1719712824_0|4186694112642701|3200,1193258875_0|4210217464040540|3200,1644250693_0|4204531443147494|3200,1707178184_0|4205252457034384|3200,2293434562_0|4200177676448907|3200,1704091601_0|4200550029157245|3200,1752502537_0|4186064158070782|3200,1229385395_0|4186302079681760|3200,1197199510_0|4201502824928741|3200,1235733435_0|4210940469881179|3200,2689280541_0|4204014243806824|32007800315198959080966535177402314186998199575517_5
```

### 2.awk -F" " '{print $7}'   
-F设置分隔符,默认是空格.这里以" " 为分隔符, 获取cat 123.txt的返回. {print $7}输出第六列元素   
```shell
chengxq@aliyun trunk$ cat 123.txt | awk -F" " '{print $7}'
1158709993_0|4199716759982061|3200,1195354434_0|4202270163995091|3200,3669102477_0|4200564508733208|3200,1228486722_0|4209934205869347|3200,2713968254_0|4199432126350256|3200,1234867763_0|4205135599723212|3200,1172294045_0|4209618152899172|3200,1809054937_0|4208433375325319|3200,1705586121_0|4211085161138276|3200,2687827715_0|4202299260145817|3200,1934403631_0|4194268162277017|3200,1270623893_0|4200418085381746|3200,1847672711_0|4198638404567850|3200,1756505647_0|4202726906577682|3200,2945931603_0|4210824124463127|3200,1651077203_0|4202687375152747|3200,3700233717_0|4188245237303670|3200,2041418617_0|4203294572525856|3200,1289012440_0|4202659894132861|3200,1644461042_0|4205282890804630|3200,2646681810_0|4194316420941427|3200,1843875727_0|4185328576918344|3200,1233614454_0|4210882156316052|3200,1784537661_0|4194336118123841|3200,1838921261_0|4202693352444836|3200,1792951112_0|4191174053088358|3200,2036799634_0|4196812212910398|3200,1639421885_0|4191085699984267|3200,1231654104_0|4203367419251110|3200,1719712824_0|4186694112642701|3200,1193258875_0|4210217464040540|3200,1644250693_0|4204531443147494|3200,1707178184_0|4205252457034384|3200,2293434562_0|4200177676448907|3200,1704091601_0|4200550029157245|3200,1752502537_0|4186064158070782|3200,1229385395_0|4186302079681760|3200,1197199510_0|4201502824928741|3200,1235733435_0|4210940469881179|3200,2689280541_0|4204014243806824|3200
chengxq@aliyun trunk$ 
```

### 3.awk -F"," '{for(i=1;i<=NF;i++)print $i}'    
以","作为分隔符获取返回的多个, for循环遍历域并打印.NF为域的个数   
```shell
chengxq@aliyun trunk$ cat 123.txt | awk -F" " '{print $7}' | awk -F"," '{for(i=1;i<=NF;i++)print $i}'
1158709993_0|4199716759982061|3200
1195354434_0|4202270163995091|3200
3669102477_0|4200564508733208|3200
1228486722_0|4209934205869347|3200
2713968254_0|4199432126350256|3200
1234867763_0|4205135599723212|3200
1172294045_0|4209618152899172|3200
1809054937_0|4208433375325319|3200
1705586121_0|4211085161138276|3200
2687827715_0|4202299260145817|3200
1934403631_0|4194268162277017|3200
1270623893_0|4200418085381746|3200
1847672711_0|4198638404567850|3200
1756505647_0|4202726906577682|3200
2945931603_0|4210824124463127|3200
1651077203_0|4202687375152747|3200
3700233717_0|4188245237303670|3200
2041418617_0|4203294572525856|3200
1289012440_0|4202659894132861|3200
1644461042_0|4205282890804630|3200
2646681810_0|4194316420941427|3200
1843875727_0|4185328576918344|3200
1233614454_0|4210882156316052|3200
1784537661_0|4194336118123841|3200
1838921261_0|4202693352444836|3200
1792951112_0|4191174053088358|3200
2036799634_0|4196812212910398|3200
1639421885_0|4191085699984267|3200
1231654104_0|4203367419251110|3200
1719712824_0|4186694112642701|3200
1193258875_0|4210217464040540|3200
1644250693_0|4204531443147494|3200
1707178184_0|4205252457034384|3200
2293434562_0|4200177676448907|3200
1704091601_0|4200550029157245|3200
1752502537_0|4186064158070782|3200
1229385395_0|4186302079681760|3200
1197199510_0|4201502824928741|3200
1235733435_0|4210940469881179|3200
2689280541_0|4204014243806824|3200
chengxq@aliyun trunk$ 
```

### 4.awk -F"|" '{print $1}'   
以"|"为分隔符,获取域,并输出第一列返回值   
```shell
chengxq@aliyun trunk$ cat 123.txt | awk -F" " '{print $7}' | awk -F"," '{for(i=1;i<=NF;i++)print $i}' | awk -F"|" '{print $1}'
1158709993_0
1195354434_0
3669102477_0
1228486722_0
2713968254_0
1234867763_0
1172294045_0
1809054937_0
1705586121_0
2687827715_0
1934403631_0
1270623893_0
1847672711_0
1756505647_0
2945931603_0
1651077203_0
3700233717_0
2041418617_0
1289012440_0
1644461042_0
2646681810_0
1843875727_0
1233614454_0
1784537661_0
1838921261_0
1792951112_0
2036799634_0
1639421885_0
1231654104_0
1719712824_0
1193258875_0
1644250693_0
1707178184_0
2293434562_0
1704091601_0
1752502537_0
1229385395_0
1197199510_0
1235733435_0
2689280541_0
chengxq@aliyun trunk$ 
```

### 5.sort
排序   

### 6.uniq -c
判断结果是否唯一   
```shell
chengxq@aliyun trunk$ cat 123.txt | awk -F" " '{print $7}' | awk -F"," '{for(i=1;i<=NF;i++)print $i}' | awk -F"|" '{print $1}' | sort | uniq -c
      1 1158709993_0
      1 1172294045_0
      1 1193258875_0
      1 1195354434_0
      1 1197199510_0
      1 1228486722_0
      1 1229385395_0
      1 1231654104_0
      1 1233614454_0
      1 1234867763_0
      1 1235733435_0
      1 1270623893_0
      1 1289012440_0
      1 1639421885_0
      1 1644250693_0
      1 1644461042_0
      1 1651077203_0
      1 1704091601_0
      1 1705586121_0
      1 1707178184_0
      1 1719712824_0
      1 1752502537_0
      1 1756505647_0
      1 1784537661_0
      1 1792951112_0
      1 1809054937_0
      1 1838921261_0
      1 1843875727_0
      1 1847672711_0
      1 1934403631_0
      1 2036799634_0
      1 2041418617_0
      1 2293434562_0
      1 2646681810_0
      1 2687827715_0
      1 2689280541_0
      1 2713968254_0
      1 2945931603_0
      1 3669102477_0
      1 3700233717_0
chengxq@aliyun trunk$ 
```

### 7.awk '{if($1>1)print $0}'
判断当第一列大于1时输出, 本处即判断当不唯一时输出记录
```shell
chengxq@aliyun trunk$ cat 123.txt | awk -F" " '{print $7}' | awk -F"," '{for(i=1;i<=NF;i++)print $i}' | awk -F"|" '{print $1}' | sort | uniq -c | awk '{if($1>1)print $0}'
chengxq@aliyun trunk$ 

chengxq@aliyun trunk$ cat 123.txt | awk -F" " '{print $7}' | awk -F"," '{for(i=1;i<=NF;i++)print $i}' | awk -F"|" '{print $1}' | sort | uniq -c | awk '{if($1==1)print $0}'
      1 1158709993_0
      1 1172294045_0
      1 1193258875_0
      1 1195354434_0
      1 1197199510_0
      1 1228486722_0
      1 1229385395_0
      1 1231654104_0
      1 1233614454_0
      1 1234867763_0
      1 1235733435_0
      1 1270623893_0
      1 1289012440_0
      1 1639421885_0
      1 1644250693_0
      1 1644461042_0
      1 1651077203_0
      1 1704091601_0
      1 1705586121_0
      1 1707178184_0
      1 1719712824_0
      1 1752502537_0
      1 1756505647_0
      1 1784537661_0
      1 1792951112_0
      1 1809054937_0
      1 1838921261_0
      1 1843875727_0
      1 1847672711_0
      1 1934403631_0
      1 2036799634_0
      1 2041418617_0
      1 2293434562_0
      1 2646681810_0
      1 2687827715_0
      1 2689280541_0
      1 2713968254_0
      1 2945931603_0
      1 3669102477_0
      1 3700233717_0
chengxq@aliyun trunk$ 
```
